<body>
    {{#if errorMessage}}
        <div class="d-flex w-100 alert alert-danger bg-danger text-white" role="alert">
            {{errorMessage}}
        </div>
    {{/if}}
    <div class="d-flex flex-column">
        <div class="d-flex justify-content-between m-4">
            <a class="btn btn-primary" href="/task">Create new task</a>
            <a class="btn btn-primary" href="?toggleStyle=true">Toggle style</a>
        </div>
        <div class="d-flex justify-content-between mx-4">
            <div class="d-flex">
                <a href="/?orderBy=title" class="btn btn-primary me-2">Title {{orderIcon}}</a>
                <a href="/?orderBy=dueDate" class="btn btn-primary mx-2">By Due Date {{orderIcon}}</a>
                <a href="/?orderBy=creationDate" class="btn btn-primary mx-2">By Creation Date {{orderIcon}}</a>
                <a href="/?orderBy=importance" class="btn btn-primary mx-2">By Importance {{orderIcon}}</a>

            </div>
            <a href="/?filterCompleted=true" class="btn btn-primary">Filter Completed</a>
        </div>
        <div class="d-flex flex-wrap m-4">
            {{#each tasks}}

                <article class="row m-3 p-3 w-30 border border-secondary rounded shadow p-3 mb-5 rounded">
                    <div class="col w-50">
                        <div class="row">
                            <div class="col-md-12 container">
                                <h2 class="h2">{{this.title}}</h2>
                            </div>
                        </div>
                        <div class="row">
                            <p>Due date: <span class="text-muted">{{this.dueDate}}</span></p>
                        </div>
                        <div class="row">
                            <p>Importance: <span>{{getImportance this.importance}}</span></p>
                        </div>
                        <div class="row">
                            <div class="d-flex col checkbox-xl my-1">
                                <label class="form-check-label" for="completedCheckbox">Completed:</label>
                                <input
                                    class="form-check-input ms-3"
                                    disabled="disabled"
                                    type="checkbox"
                                    id="completedCheckbox"
                                    {{ifDone this.done}}
                                />
                            </div>
                        </div>
                        <div class="row">
                            <label> Description: </label>
                            <p>{{this.description}}</p>
                        </div>
                    </div>
                    <div class="d-flex col justify-content-end">
                        <div>
                            <a class="btn btn-primary" href="/task/edit/{{this._id}}">Edit</a>
                            <a class="btn btn-danger" href="/task/delete/{{this._id}}">Delete</a>
                        </div>
                    </div>
                </article>

            {{/each}}
        </div>
    </div>
    <script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"
    ></script>
</body>